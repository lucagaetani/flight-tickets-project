{
  "version": 3,
  "sources": ["../../../src/dialects/postgres/connection-manager.ts"],
  "sourcesContent": ["import assert from 'node:assert';\nimport pick from 'lodash/pick';\nimport type { Client, ClientConfig } from 'pg';\nimport type { TypeId, TypeParser } from 'pg-types';\nimport semver from 'semver';\nimport {\n  ConnectionError,\n  ConnectionRefusedError,\n  ConnectionTimedOutError,\n  HostNotFoundError,\n  HostNotReachableError,\n  InvalidConnectionError,\n} from '../../errors';\nimport { Sequelize } from '../../sequelize.js';\nimport type { ConnectionOptions } from '../../sequelize.js';\nimport { isValidTimeZone } from '../../utils/dayjs';\nimport { logger } from '../../utils/logger';\nimport type { Connection } from '../abstract/connection-manager';\nimport { AbstractConnectionManager } from '../abstract/connection-manager';\nimport type { PostgresDialect } from './index.js';\n\nconst debug = logger.debugContext('connection:pg');\n\n// TODO: once the code has been split into packages, we won't need to lazy load pg anymore\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\ntype Lib = typeof import('pg');\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\ntype ArrayParserLib = typeof import('postgres-array');\n\ntype TypeFormat = 'text' | 'binary';\n\ninterface TypeOids {\n  oid: number;\n  typeName: string;\n  type: 'base' | 'array' | 'range' | 'range-array';\n  /** oid of the base type. Available on array, range & range-array */\n  baseOid?: number;\n  /** oid of the range. Available on range-array */\n  rangeOid?: number;\n}\n\nexport interface PgConnection extends Connection, Client {\n  // custom property we attach to the client\n  // TODO: replace with Symbols.\n  _invalid?: boolean;\n  standard_conforming_strings?: boolean;\n\n  // Private property of pg-client\n  // TODO: ask pg to expose a stable, readonly, property we can use\n  _ending?: boolean;\n}\n\nexport class PostgresConnectionManager extends AbstractConnectionManager<PgConnection> {\n  private readonly lib: Lib;\n  readonly #arrayParserLib: ArrayParserLib;\n\n  #oidMap = new Map<number, TypeOids>();\n  #oidParserCache = new Map<number, TypeParser<any, any>>();\n\n  constructor(dialect: PostgresDialect, sequelize: Sequelize) {\n    super(dialect, sequelize);\n\n    const pgLib = this._loadDialectModule('pg') as Lib;\n    this.lib = this.sequelize.config.native ? pgLib.native! : pgLib;\n    assert(this.lib != null, 'pg-native module not found, please install it');\n\n    this.#arrayParserLib = this._loadDialectModule('postgres-array') as ArrayParserLib;\n  }\n\n  async connect(config: ConnectionOptions): Promise<PgConnection> {\n    const port = Number(config.port ?? this.dialect.getDefaultPort());\n\n    // @ts-expect-error -- \"dialectOptions.options\" must be a string in PG, but a Record in MSSQL. We'll fix the typings when we split the dialects into their own modules.\n    const connectionConfig: ClientConfig = {\n      ...(config.dialectOptions && pick(config.dialectOptions, [\n        // see [http://www.postgresql.org/docs/9.3/static/runtime-config-logging.html#GUC-APPLICATION-NAME]\n        'application_name',\n        // choose the SSL mode with the PGSSLMODE environment variable\n        // object format: [https://github.com/brianc/node-postgres/blob/ee19e74ffa6309c9c5e8e01746261a8f651661f8/lib/connection.js#L79]\n        // see also [http://www.postgresql.org/docs/9.3/static/libpq-ssl.html]\n        'ssl',\n        // In addition to the values accepted by the corresponding server,\n        // you can use \"auto\" to determine the right encoding from the\n        // current locale in the client (LC_CTYPE environment variable on Unix systems)\n        'client_encoding',\n        // !! DO NOT SET THIS TO TRUE !!\n        // (unless you know what you're doing)\n        // see [http://www.postgresql.org/message-id/flat/bc9549a50706040852u27633f41ib1e6b09f8339d845@mail.gmail.com#bc9549a50706040852u27633f41ib1e6b09f8339d845@mail.gmail.com]\n        'binary',\n        // This should help with backends incorrectly considering idle clients to be dead and prematurely disconnecting them.\n        // this feature has been added in pg module v6.0.0, check pg/CHANGELOG.md\n        'keepAlive',\n        // Times out queries after a set time in milliseconds in the database end. Added in pg v7.3\n        'statement_timeout',\n        // Times out queries after a set time in milliseconds in client end, query would be still running in database end.\n        'query_timeout',\n        // Number of milliseconds to wait for connection, default is no timeout.\n        'connectionTimeoutMillis',\n        // Terminate any session with an open transaction that has been idle for longer than the specified duration in milliseconds. Added in pg v7.17.0 only supported in postgres >= 10\n        'idle_in_transaction_session_timeout',\n        // Maximum wait time for lock requests in milliseconds. Added in pg v8.8.0.\n        'lock_timeout',\n        // Postgres allows additional session variables to be configured in the connection string in the `options` param.\n        // see [https://www.postgresql.org/docs/14/libpq-connect.html#LIBPQ-CONNECT-OPTIONS]\n        'options',\n        // The stream acts as a user-defined socket factory for postgres. In particular, it enables IAM autentication\n        // with Google Cloud SQL. see: https://github.com/sequelize/sequelize/issues/16001#issuecomment-1561136388\n        'stream',\n      ])),\n      port,\n      ...pick(config, ['password', 'host', 'database']),\n      user: config.username,\n      types: {\n        getTypeParser: (oid: TypeId, format?: TypeFormat) => this.getTypeParser(oid, format),\n      },\n    };\n\n    const connection: PgConnection = new this.lib.Client(connectionConfig);\n\n    await new Promise((resolve, reject) => {\n      let responded = false;\n\n      const parameterHandler = (message: { parameterName: string, parameterValue: string }) => {\n        switch (message.parameterName) {\n          case 'server_version': {\n            const version = semver.coerce(message.parameterValue)?.version;\n            this.sequelize.options.databaseVersion = version && semver.valid(version)\n              ? version\n              : this.dialect.defaultVersion;\n\n            break;\n          }\n\n          case 'standard_conforming_strings': {\n            connection.standard_conforming_strings = message.parameterValue === 'on';\n            break;\n          }\n\n          default:\n        }\n      };\n\n      const endHandler = () => {\n        debug('connection timeout');\n        if (!responded) {\n          reject(new ConnectionTimedOutError(new Error('Connection timed out')));\n        }\n      };\n\n      // If we didn't ever hear from the client.connect() callback the connection timeout\n      // node-postgres does not treat this as an error since no active query was ever emitted\n      connection.once('end', endHandler);\n\n      if (!this.sequelize.config.native) {\n        // Receive various server parameters for further configuration\n        // @ts-expect-error -- undeclared type\n        connection.connection.on('parameterStatus', parameterHandler);\n      }\n\n      connection.connect(err => {\n        responded = true;\n\n        if (!this.sequelize.config.native) {\n          // remove parameter handler\n          // @ts-expect-error -- undeclared type\n          connection.connection.removeListener('parameterStatus', parameterHandler);\n        }\n\n        if (err) {\n          // @ts-expect-error -- undeclared type\n          if (err.code) {\n            // @ts-expect-error -- undeclared type\n            switch (err.code) {\n              case 'ECONNREFUSED':\n                reject(new ConnectionRefusedError(err));\n                break;\n              case 'ENOTFOUND':\n                reject(new HostNotFoundError(err));\n                break;\n              case 'EHOSTUNREACH':\n                reject(new HostNotReachableError(err));\n                break;\n              case 'EINVAL':\n                reject(new InvalidConnectionError(err));\n                break;\n              default:\n                reject(new ConnectionError(err));\n                break;\n            }\n          } else {\n            reject(new ConnectionError(err));\n          }\n        } else {\n          debug('connection acquired');\n          connection.removeListener('end', endHandler);\n          resolve(connection);\n        }\n      });\n    });\n\n    // Don't let a Postgres restart (or error) to take down the whole app\n    connection.on('error', (error: any) => {\n      connection._invalid = true;\n      debug(`connection error ${error.code || error.message}`);\n      void this.pool.destroy(connection);\n    });\n\n    let query = '';\n\n    if (this.sequelize.options.standardConformingStrings !== false && connection.standard_conforming_strings) {\n      // Disable escape characters in strings\n      // see https://github.com/sequelize/sequelize/issues/3545 (security issue)\n      // see https://www.postgresql.org/docs/current/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS\n      query += 'SET standard_conforming_strings=on;';\n    }\n\n    if (this.sequelize.options.clientMinMessages !== undefined) {\n      console.warn('Usage of \"options.clientMinMessages\" is deprecated and will be removed in v7.');\n      console.warn('Please use the sequelize option \"dialectOptions.clientMinMessages\" instead.');\n    }\n\n    // Redshift dosen't support client_min_messages, use 'ignore' to skip this settings.\n    // If no option, the default value in sequelize is 'warning'\n    if (!(config.dialectOptions && config.dialectOptions.clientMinMessages && config.dialectOptions.clientMinMessages.toLowerCase() === 'ignore'\n      || this.sequelize.options.clientMinMessages === false)) {\n      const clientMinMessages = config.dialectOptions && config.dialectOptions.clientMinMessages || this.sequelize.options.clientMinMessages || 'warning';\n      query += `SET client_min_messages TO ${clientMinMessages};`;\n\n    }\n\n    if (!this.sequelize.config.keepDefaultTimezone) {\n      if (this.sequelize.options.timezone && isValidTimeZone(this.sequelize.options.timezone)) {\n        query += `SET TIME ZONE '${this.sequelize.options.timezone}';`;\n      } else {\n        query += `SET TIME ZONE INTERVAL '${this.sequelize.options.timezone}' HOUR TO MINUTE;`;\n      }\n    }\n\n    if (query) {\n      await connection.query(query);\n    }\n\n    await this.#refreshOidMap(connection);\n\n    return connection;\n  }\n\n  async disconnect(connection: PgConnection): Promise<void> {\n    if (connection._ending) {\n      debug('connection tried to disconnect but was already at ENDING state');\n\n      return;\n    }\n\n    await connection.end();\n  }\n\n  validate(connection: PgConnection) {\n    return !connection._invalid && !connection._ending;\n  }\n\n  async #refreshOidMap(connection: PgConnection | Sequelize): Promise<void> {\n    const sql = `\n      WITH ranges AS (SELECT pg_range.rngtypid,\n                             pg_type.typname  AS rngtypname,\n                             pg_type.typarray AS rngtyparray,\n                             pg_range.rngsubtype\n                      FROM pg_range\n                             LEFT OUTER JOIN pg_type\n                                             ON pg_type.oid = pg_range.rngtypid)\n      SELECT pg_type.typname,\n             pg_type.typtype,\n             pg_type.oid,\n             pg_type.typarray,\n             ranges.rngtypname,\n             ranges.rngtypid,\n             ranges.rngtyparray\n      FROM pg_type\n             LEFT OUTER JOIN ranges\n                             ON pg_type.oid = ranges.rngsubtype\n      WHERE (pg_type.typtype IN ('b', 'e'));\n    `;\n\n    let results;\n    if (connection instanceof Sequelize) {\n      results = (await connection.query(sql)).pop();\n    } else {\n      results = await connection.query(sql);\n    }\n\n    // When searchPath is prepended then two statements are executed and the result is\n    // an array of those two statements. First one is the SET search_path and second is\n    // the SELECT query result.\n    if (Array.isArray(results) && results[0].command === 'SET') {\n      results = results.pop();\n    }\n\n    const newNameOidMap = new Map<number, TypeOids>();\n\n    for (const row of results.rows) {\n      // Mapping base types and their arrays\n      // Array types are declared twice, once as part of the same row as the base type, once as their own row.\n      if (!newNameOidMap.has(row.oid)) {\n        newNameOidMap.set(row.oid, {\n          oid: row.oid,\n          typeName: row.typname,\n          type: 'base',\n        });\n      }\n\n      if (row.typarray) {\n        newNameOidMap.set(row.typarray, {\n          oid: row.typarray,\n          typeName: row.typname,\n          type: 'array',\n          baseOid: row.oid,\n        });\n      }\n\n      if (row.rngtypid) {\n        newNameOidMap.set(row.rngtypid, {\n          oid: row.rngtypid,\n          typeName: row.rngtypname,\n          type: 'range',\n          baseOid: row.oid,\n        });\n      }\n\n      if (row.rngtyparray) {\n        newNameOidMap.set(row.rngtyparray, {\n          oid: row.rngtyparray,\n          typeName: row.rngtypname,\n          type: 'range-array',\n          baseOid: row.oid,\n          rangeOid: row.rngtypid,\n        });\n      }\n    }\n\n    // Replace all OID mappings. Avoids temporary empty OID mappings.\n    this.#oidMap = newNameOidMap;\n  }\n\n  #buildArrayParser(subTypeParser: (value: string) => unknown): (source: string) => unknown[] {\n    return (source: string) => {\n      return this.#arrayParserLib.parse(source, subTypeParser);\n    };\n  }\n\n  getTypeParser(oid: TypeId, format?: TypeFormat): TypeParser<any, any> {\n    const cachedParser = this.#oidParserCache.get(oid);\n\n    if (cachedParser) {\n      return cachedParser;\n    }\n\n    const customParser = this.#getCustomTypeParser(oid, format);\n    if (customParser) {\n      this.#oidParserCache.set(oid, customParser);\n\n      return customParser;\n    }\n\n    // @ts-expect-error -- pg did not provide a broadly-typed version of getTypeParser. The typing boilerplate is not worth the result.\n    return this.lib.types.getTypeParser(oid, format);\n  }\n\n  #getCustomTypeParser(oid: TypeId, format?: TypeFormat): TypeParser<any, any> | null {\n    const typeData = this.#oidMap.get(oid);\n\n    if (!typeData) {\n      return null;\n    }\n\n    if (typeData.type === 'range-array') {\n      return this.#buildArrayParser(this.getTypeParser(typeData.rangeOid!, format));\n    }\n\n    if (typeData.type === 'array') {\n      return this.#buildArrayParser(this.getTypeParser(typeData.baseOid!, format));\n    }\n\n    const parser = this.dialect.getParserForDatabaseDataType(typeData.typeName);\n\n    return parser ?? null;\n  }\n\n  /**\n   * Refreshes the local registry of Custom Types (e.g. enum) OIDs\n   */\n  async refreshDynamicOids() {\n    await this.#refreshOidMap(this.sequelize);\n  }\n}\n"],
  "mappings": "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",
  "names": ["assert", "pick", "semver"]
}
